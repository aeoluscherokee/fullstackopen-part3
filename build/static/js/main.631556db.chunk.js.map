{"version":3,"sources":["services/person.js","components/Notification.js","components/Filter.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","del","id","delete","update","put","Notification","notification","className","type","message","Filter","value","onChange","PersonForm","onSubmit","newName","newNumber","onNameChange","onNumberChange","Persons","persons","onDeletePerson","map","person","name","number","onClick","App","useState","setPersons","useEffect","personService","setNewName","setNewNumber","search","setSearch","showAll","setShowAll","setNotification","personToShow","filter","toLowerCase","includes","event","target","preventDefault","personObject","existingPerson","find","window","confirm","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.631556db.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst exportedObject = {\n  getAll,\n  create,\n  del,\n  update,\n};\n\nexport default exportedObject;\n","import React from \"react\";\n\nconst Notification = ({ notification }) => {\n  if (notification) {\n    return <h2 className={notification.type}>{notification.message}</h2>;\n  } else return null;\n};\nexport default Notification\n","import React from \"react\";\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter shown with <input value={value} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  onSubmit,\n  newName,\n  newNumber,\n  onNameChange,\n  onNumberChange,\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={newName} onChange={onNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={onNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, onDeletePerson }) => {\n  return (\n    <div>\n      {persons.map((person, id) => (\n        <p key={id}>\n          {person.name} {person.number}\n          <button onClick={onDeletePerson(person.id, person.name)}>\n            delete\n          </button>\n        </p>\n      ))}\n    </div>\n  );\n};\nexport default Persons;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/person\";\nimport Notification from \"./components/Notification\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  useEffect(() => {\n    personService.getAll().then((persons) => setPersons(persons));\n  }, []);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [showAll, setShowAll] = useState(true);\n  const [notification, setNotification] = useState();\n  const personToShow = showAll\n    ? persons\n    : persons.filter((person) =>\n        person.name.toLowerCase().includes(search.toLowerCase())\n      );\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = { name: newName, number: newNumber };\n    const existingPerson = persons.find(\n      (person) => person.name.toLowerCase() === personObject.name.toLowerCase()\n    );\n    if (existingPerson) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(existingPerson.id, personObject)\n          .then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== existingPerson.id ? person : response\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotification({\n              message: `${existingPerson.name}'s number has been updated`,\n              type: \"success-message\",\n            });\n            setTimeout(() => setNotification(null), 5000);\n          })\n          .catch((error) => {\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotification({\n              message: error.message,\n              type: \"error-message\",\n            });\n            setTimeout(() => setNotification(null), 5000);\n          });\n      } else return;\n    } else {\n      personService\n        .create(personObject)\n        .then((person) => {\n          setPersons(persons.concat(person));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotification({\n            message: `${person.name} is already added to phonebook`,\n            type: \"success-message\",\n          });\n          setTimeout(() => setNotification(null), 5000);\n        })\n        .catch((error) => {\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotification({\n            message: error.message,\n            type: \"error-message\",\n          });\n          setTimeout(() => setNotification(null), 5000);\n        });\n    }\n  };\n\n  const deletePerson = (id, name) => {\n    const handleDelete = () => {\n      if (window.confirm(`Delete ${name}?`)) {\n        personService\n          .del(id)\n          .then(() => {\n            setPersons(persons.filter((person) => person.name !== name));\n            setNotification({\n              message: `${name} has been deleted`,\n              type: \"success-message\",\n            });\n            setTimeout(() => setNotification(null), 5000);\n          })\n          .catch(() => {\n            setNotification({\n              message: `${name} was already removed from server`,\n              type: \"error-message\",\n            });\n            setTimeout(() => setNotification(null), 5000);\n          });\n      } else return;\n    };\n    return handleDelete;\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    setSearch(event.target.value);\n    setShowAll(false);\n    if (event.target.value === \"\") {\n      setShowAll(true);\n    }\n  };\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter value={search} onChange={handleSearchChange} />\n      <h3>add new</h3>\n      <PersonForm\n        onSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personToShow} onDeletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}